'use strict';const Telegram=require("telegram-node-bot");
class TodoController extends Telegram.TelegramBaseController{addHandler(a){let b=a.message.text.split(" ").slice(1).join(" ");b||a.sendMessage("Sorry, you have to enter a todo name");a.getUserSession("todos").then(c=>{Array.isArray(c)?a.setUserSession("todos",c.concat([b])):a.setUserSession("todos",[b]);b&&a.sendMessage(`"${b}" was added to the list successfully`)})}getHandler(a){a.getUserSession("todos").then(b=>{0<b.length?a.sendMessage(this._serializeTodos(b),{parseMode:"MarkDown"}):a.sendMessage("Your todo list is empty")})}_serializeTodos(a){let b=
"Your todos are:\n\n";a.forEach((c,d)=>{b+=`${d+1}. ${c}\n`});return b}checkHandler(a){let b=a.message.text.split(" ").slice(1)[0];try{this._checkTodo(parseInt(b)-1)}catch(c){a.sendMessage("Not in range!")}b||a.sendMessage("You have to enter the todo to check out!")}_checkTodo(a){$.getUserSession("todos").then(b=>{b?b.splice(a,1):$.sendMessage("You have no todos to check out");$.sendMessage("Todo Checked!")})}get routes(){return{addCommand:"addHandler",getCommand:"getHandler",checkCommand:"checkHandler"}}}
module.exports=TodoController;